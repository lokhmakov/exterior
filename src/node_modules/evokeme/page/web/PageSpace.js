import React, { Component } from 'react'

import { connect }          from 'react-redux'

import uuid                 from 'uuid/v4'


import SpaceContext        from 'evokeme/space/all/Context'
import SpaceSubProvider    from 'evokeme/space/all/SubProvider'


const who = [`evokeme`, `web`, `PageSpace`]

class PageSpace extends Component {
  componentDidMount = async () => {
    const { context } = this.props

    context.item.create({
      id: uuid(),
      x: 10,
      y: 10,

      __type: `point`,
    })

    context.item.create({
      id: uuid(),
      x: 50,
      y: 50,

      __type: `point`,
    })
  }

  render() {
    const { context: { item } } = this.props
    const { data, order } = item
    
    console.log(...who, `DATA`, data)
    console.log(...who, `ORDER`, order)

    return (
      <div>PageSpace</div>
    )
  }
}

export default (props) => {
  return (
    <SpaceSubProvider entity='point'>
      <SpaceContext.Consumer>
        {(context) => (
          <PageSpace
            {...props}
            context={ context }
          />
        )}
      </SpaceContext.Consumer>
    </SpaceSubProvider>
  )
}