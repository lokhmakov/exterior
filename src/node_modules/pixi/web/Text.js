import React, { Component } from 'react'

import * as PIXI            from 'pixi.js'


import Context              from 'pixi/all/Context'


const who = [`pixi`, `web`, `Text`]

class Text extends Component {
  componentDidMount() {
    const { context } = this.props
    const { action } = context

    const app = action.app.get()

    this.message = new PIXI.Text("Hello Pixi!");

    this.message.interactive = true
    this.message.click = this.onClick

    app.stage.addChild(this.message)
  }

  componentWillUnmount() {
    const { context } = this.props
    const { action } = context

    const app = action.app.get()

    app.stage.removeChild(this.message)
  }

  onClick = () => {
    const { context } = this.props

    context.debug && console.log(...who, `onClick`)
  }

  render() {
    return null
  }
}

export default (props) => {
  return (
    <Context.Consumer>
      {(context) => (
        <Text {...props} context={ context } />
      )}
    </Context.Consumer>
  )
}